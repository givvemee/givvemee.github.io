---
layout: post
Title: 1020 React.js Class
tags: [study]
categories: react.js
---

### (React.js) 1020 - 13th Class

###### 21. 10. 15 (13/25) useEffect 2

ì˜¤ëŠ˜ì€ useEffect ì˜ ë‘ ë²ˆì§¸ ì‹œê°„.

Forest ë¼ëŠ” ì–´í”Œì„ ë‹¤ìš´ ë°›ì•˜ë‹¹. ì‹œê°„ì„ ì •í•´ë†“ê³  ê·¸ ì‹œê°„ ë™ì•ˆ íœ´ëŒ€í° í™”ë©´ì— ë‚˜ë¬´ ì‹¬ëŠ” ê²ƒì´ ëœ¨ëŠ”ë° ì´ë•Œ ì´ ì–´í”Œì„ ì¢…ë£Œí•˜ê²Œ ë˜ë©´ ë‚˜ë¬´ê°€ ì‹œë“ ë‹¤... ê·¸ë˜ì„œ ì§‘ì¤‘í•  ë•Œ ì¢‹ì„ ê²ƒ ê°™ì•„ì„œ ë°›ê³  2ì‹œê°„ì„ ì„¤ì •í•´ ë‘ì—ˆë‹¹.

![image](https://user-images.githubusercontent.com/89691274/138076413-aeda1636-6ed7-40b7-8ebb-e2f7e10909a8.png)

ê¹ƒí—ˆë¸Œì—” ì”ë””ë¥¼ ì‹¬ê³  ì•ìœ¼ë¡œ í¬ë ˆìŠ¤íŠ¸ì—” ë‚˜ë¬´ë¥¼ ì‹¬ëŠ” ì‚¬ëŒ ë¨.

<br/>

<br/>

#### useEffect ê°„ë‹¨ ì˜ˆì œ - íƒ€ì´ë¨¸

start / pause ë¥¼ ëˆ„ë¥´ë©´ ì‹œì‘í•˜ê±°ë‚˜ ë©ˆì¶”ê³ , reset ì„ ëˆ„ë¥´ë©´ ê·¸ëŒ€ë¡œ ì‹œê°„ì„ 0 ìœ¼ë¡œ ë§Œë“œëŠ” íƒ€ì´ë¨¸ë¥¼ ë§Œë“¤ì–´ ë³´ì•˜ë‹¤. ì—­ì‹œ ì‹œê°„ì„ ì“°ê¸° ë•Œë¬¸ì— ë’·ì •ë¦¬ í•¨ìˆ˜ê°€ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ìŠì§€ ë§ì.

```react
import React, { useEffect, useState } from 'react';

const Test1 = () => {
    const [count, setCount] = useState(0)
    const [isActive, setIsActive] = useState(false)

    const onToggle = () => {
        setIsActive(!isActive)
    }
    const onReset = () => {
        setIsActive(false)
        setCount(0)
    }

    useEffect(() => {
        let timerId = null
        if (isActive) {
            timerId = setInterval( () => {
                setCount(state => state + 1)
            }, 1000)
        } else if (!isActive && count !== 0) {
            clearInterval(timerId)
        }

        // ì‹œê°„ì´ê¸° ë•Œë¬¸ì— ë’·ì •ë¦¬ í•„ìš”
        return () => {
            console.log('clean up')
            clearInterval(timerId)
        }
    }, [ isActive, count ])
    // isActive ê°€ ë°”ë€” ë•Œ ê°’ì´ ë°”ë€œ. ì–˜ë¥¼ ë¹„ìš°ë©´ ì‹¤í–‰ì´ ì•ˆ ë¨
    return (
        <div>
            <h1>ì¹´ìš´íŠ¸ : {count}</h1>
            <button onClick={onToggle}>
                {
                    // isActive && true ? 'Pause' : 'Start'
                    isActive ? 'Pause' : 'Start'
                }
            </button>
            <button onClick={onReset}>Reset</button>
        </div>
    );
};

export default Test1;
```

<br/>

#### useEffect ê°„ë‹¨ ì˜ˆì œ 2 

ì˜ˆì œ 2ì—ì„œ ë§Œë“¤ì–´ ë³¼ ê²ƒì€ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìˆ¨ê²¨ì ¸ ìˆë˜ ë°•ìŠ¤ê°€ ë‚˜ì˜¤ê³ , ê·¸ ë°•ìŠ¤ì˜ ë‚´ìš© ì•ˆì—ëŠ” í˜„ì¬ ì‹œê°„ì„ ë‹´ê³  ìˆëŠ” ì •ë³´ê°€ ìˆë‹¤. ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ë¥¼ í•´ì„œ ë§Œë“¤ì–´ ë³´ì•˜ë‹¤. 

```react
// Test2 ë¶€ëª¨
import React, { useState } from 'react';
import Test2Sub from './Test2Sub';

const Test2 = () => {
    const [isShow, setIsShow] = useState(false)
    const onToggle = () => {
        setIsShow(!isShow)
    }
    return (
        <div>
            <p>
                <button onClick={onToggle}>
                    {
                        isShow ? 'Hide' : 'Show'
                    }
                </button>
            </p>
            {
                isShow && <Test2Sub />
            }
            {/* <Test2Sub/> */}
        </div>
    );
};

export default Test2;

// Test2Sub ìì‹
import React, { useEffect, useState } from 'react';

const Test2Sub = () => {
    const [date, setDate] = useState(new Date())
    useEffect(() => {
        const timer = setInterval(()=> {
            setDate(new Date())
        }, 1000)

        return() => {
            clearInterval(timer)
        }
    },[])
    return (
        <div>
            <h2>Date : {date.toLocaleDateString()}</h2>
            <h2>Time : {date.toLocaleTimeString()}</h2>
        </div>
    );
};

export default Test2Sub;
```

ê·¸ë˜ë„ ë¦¬ì•¡íŠ¸ ìˆ˜ì—… ìµœê·¼ì— ì—´ì‹¬íˆ ë“¤ìœ¼ë©´ì„œ... ë‚´ê°€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¬¸ë²•ì—ë„ ìµìˆ™í•´ì§€ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì¡°ê¸ˆì”© ëŠë‚€ë‹¤. ì˜ˆì „ì—ëŠ” ì‚¼í•­ ì—°ì‚°ì! ì´ëŸ¬ë©´ ì–´ë²„ë²„ ë²„ë²…ë²„ë²… í–ˆëŠ”ë°...

ì§€ê¸ˆì€ `isShow && <Test2Sub />` ë¥¼ `isShow && true ? <Test2Sub /> : null` ë¡œ ì“°ëŠ” ì •ë„ëŠ” ëœë‹¤. ì´ê±° ì“°ê³  ì‚¬ì‹¤ ë¿Œë“¯... ğŸ¤¤ ì „ìì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆê²Œ ë” ì¤„ì—¬ë‚˜ê°€ì•¼ê² ì§€ë§Œ...

<br/>

<br/>

ê·¸ë¦¬ê³  useEffect ë¥¼ ì´ìš©í•œ ë°ì´í„°ì˜ ì¶”ê°€, ì œê±°, ìˆ˜ì •ì— ëŒ€í•´ì„œë„ ë°˜ ì •ë„ ì§„ë„ë¥¼ ë‚˜ê°”ëŠ”ë°, ê·¸ê²ƒì€ ë‹¤ ë‚˜ê°€ê²Œ ë˜ë©´ í•œêº¼ë²ˆì— ì—…ë¡œë“œë¥¼ í•  ì˜ˆì •ì´ë‹¤.

ì˜¤ëŠ˜ì€ ìˆ˜ì—… ëë‚˜ê³  ë‚ ì§œì™€ ì‹œê°„/ íƒ€ì´ë¨¸ë¥¼ ë³µìŠµí•´ ë³´ì•˜ë‹¤. 

ë‚´ê°€ ì§  ì½”ë“œ >>

```react
import React, { useEffect, useState } from 'react';

const Timer = () => {
    const [day, setDay] = useState(new Date())
    const [time, setTime] = useState(new Date())
    useEffect(() => {
        const timer = setInterval(() => {
            setTime(new Date())
        }, 1000)

        return () => {
            clearInterval(timer)
        }
    }, [])

    const [isShow, setIsShow] = useState(false)
    const [count, setCount] = useState(0)
    const toggling = () => {
        setIsShow(!isShow)
    }
    const reseting = () => {
        
        setCount(0)
    }
    useEffect(() => {
        let stopwatch = null
        if (isShow) {
            stopwatch = setInterval(() => {
                setCount(state => state + 1)
            }, 1000)
        } else {
            clearInterval(stopwatch)
        }
        return () => {
            clearInterval(stopwatch)
        }
    }, [isShow, count])
    return (
        <div>
            <div>
                <h2>Day And Time</h2>
                <p>{day.toLocaleDateString()}</p>
                <p>{time.toLocaleTimeString()}</p>
            </div>
            <hr/>
            <div>
                <h2>Stopwatch</h2>
                <p>{count}</p>
                <button onClick={toggling}>
                    {
                        isShow ? 'pause' : 'start'
                    }
                </button>
                <button onClick={reseting}>reset</button>
            </div>
        </div>
    );
};

export default Timer;
```

ê²°ê³¼ë¬¼ì€ ì•„ë˜ì™€ ê°™ë‹¤. ì—­ì‹œ ë³µìŠµì„ ë°”ë¡œë°”ë¡œ í•´ì•¼ ì•ˆ ê¹Œë¨¹ê³  ë¿Œë“¯í•˜ê³  ì„±ì·¨ê°ì´ ë°°ê°€ ëœë‹¤!!

![image](https://user-images.githubusercontent.com/89691274/138107355-8986e5d8-f610-44f3-b887-973ebf2fc031.png)

<br />

<br />

<br />

<br />

__Noted at 2021. 10. 20__



